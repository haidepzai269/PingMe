<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trang ch·ªß</title>
  <link rel="stylesheet" href="home.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
  <!-- Hi·ªáu ·ª©ng ch·ªØ khi v·ª´a ƒëƒÉng nh·∫≠p -->
  <div id="login-effect-overlay" class="login-effect hidden">
    <svg viewBox="0 0 600 100" class="draw-text">
      <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle">ChatWeb</text>
    </svg>
  </div>
  

  <div class="wrapper">
    <!-- Sidebar -->
    <!-- Sidebar -->
    <aside class="sidebar">
      <button onclick="location.href='home.html'"><i class="fas fa-house"></i></button>
      <button id="btn-chat"><i class="fas fa-comments"></i></button>

      <!-- Avatar ·ªü g√≥c d∆∞·ªõi -->
       <div id="sidebar-avatar" class="sidebar-avatar">
         <img  alt="Avatar" id="sidebar-avatar-img">
       </div>
    </aside>

    <!-- Popup logout -->
    <div id="logout-popup" class="popup">
  <div class="popup-content">
    <span class="popup-close" onclick="document.getElementById('logout-popup').classList.remove('show')">&times;</span>
    <img class="popup-avatar" src="default-avatar.png" alt="avatar" id="logout-popup-img">
    <h2 class="popup-username" id="logout-popup-username">...</h2>
    <button id="logout-btn" class="popup-message-btn">ƒêƒÉng xu·∫•t</button>
  </div>
    </div>

     
    <!-- Danh s√°ch ng∆∞·ªùi d√πng -->
    <main class="main-section">
      <div id="search-wrapper" style="position: relative; display: inline-block; width: 100%;">
        <input type="text" id="search" placeholder="T√¨m ki·∫øm b·∫°n b√® ..." autocomplete="off" />
        <div id="search-history-popup" class="search-popup ">
          <div class="search-popup-header">
            <span>L·ªãch s·ª≠ t√¨m ki·∫øm</span>
            <button id="clear-search-history">X√≥a t·∫•t c·∫£</button>
          </div>
          <ul id="search-history-list"></ul>
        </div>
      </div>
      <h3 class="friend-suggestion-title">G·ª£i √Ω b·∫°n b√®</h3>
      <div id="search-results" class="hidden"></div>
      <div id="user-list"></div>
    </main>

    <!-- H·ªì s∆° c√° nh√¢n -->
    <aside class="profile-section">
      <div id="notification-bell">
        <i class="fa-solid fa-bell"></i>
        <span id="notification-badge" class="hidden">0</span>
      </div>
        <!-- Popup th√¥ng b√°o -->
      <div id="notification-popup" class="notification-popup hidden">
    <h3>Th√¥ng b√°o</h3>
    <ul id="notification-list"></ul>
      </div>
      <div id="profile-avatar"></div>
      <h2 id="profile-username">...</h2>
      <p id="profile-bio">...</p>
      <div class="profile-info">
        <p id="profile-email"><i class="fas fa-envelope"></i> Email: Ch∆∞a c·∫≠p nh·∫≠t</p>
        <p id="profile-gender"><i class="fas fa-venus-mars"></i> Gi·ªõi t√≠nh: Ch∆∞a c·∫≠p nh·∫≠t</p>
        <p id="profile-address"><i class="fas fa-map-marker-alt"></i> ƒê·ªãa ch·ªâ: Ch∆∞a c·∫≠p nh·∫≠t</p>
        <p id="profile-phone"><i class="fas fa-phone"></i> S·ªë ƒëi·ªán tho·∫°i: Ch∆∞a c·∫≠p nh·∫≠t</p>
      </div>      
      <p id="profile-friends-count" class="friends-count">B·∫°n b√®: 0</p>
      <button id="edit-profile">Ch·ªânh s·ª≠a th√¥ng tin</button>
    </aside>
  </div>

  
<!-- Modal ch·ªânh s·ª≠a -->
<div id="edit-modal" class="modal hidden">
    <div class="modal-content">
      <h2>Ch·ªânh s·ª≠a h·ªì s∆°</h2>
      <input type="text" id="edit-username" placeholder="T√™n t√†i kho·∫£n m·ªõi" />
      <textarea id="edit-bio" placeholder="Gi·ªõi thi·ªáu b·∫£n th√¢n..."></textarea>
      <input   type="file" id="edit-avatar" accept="image/*" />
      <input type="email" id="edit-email" placeholder="Email" />
      <select id="edit-gender">
  <option value="">Gi·ªõi t√≠nh</option>
  <option value="male">Nam</option>
  <option value="female">N·ªØ</option>
  <option value="other">Kh√°c</option>
      </select>
      <input type="text" id="edit-address" placeholder="ƒê·ªãa ch·ªâ" />
      <input type="text" id="edit-phone" placeholder="S·ªë ƒëi·ªán tho·∫°i" />

      <button onclick="submitEdit()">L∆∞u thay ƒë·ªïi</button>
      <button onclick="closeModal()">H·ªßy</button>
    </div>
  </div>
  <!-- Avatar Modal -->
  <div id="avatar-modal" class="modal hidden">
    <div class="avatar-modal-content">
      <span id="close-avatar-modal" class="close">&times;</span>
      <img id="modal-avatar-img" src="" alt="avatar full" />
    </div>
  </div>

  <!-- Mobile Navigation -->
  <!-- <div class="mobile-nav">
  <button onclick="location.href='home.html'">üè†</button>
  <button onclick="location.href='chat.html'">üí¨</button>
  <button onclick="document.getElementById('edit-modal').classList.remove('hidden')">üë§</button>
  </div> -->
  <div id="unsupported-message" class="hidden">
    <h2>Xin l·ªói , trang kh√¥ng ho·∫°t ƒë·ªông</h2>
    <p>Thi·∫øt b·ªã c·ªßa b·∫°n c√≥ m√†n h√¨nh qu√° nh·ªè ƒë·ªÉ s·ª≠ d·ª•ng trang web n√†y.</p>
  </div>
  <div id="user-info-popup" class="popup">
    <div class="popup-content">
      <span class="popup-close" onclick="closeUserInfoPopup()">&times;</span>
      <img class="popup-avatar" src="" alt="avatar">
      <h2 class="popup-username">T√™n</h2>
      <p class="popup-bio">Gi·ªõi thi·ªáu</p>
      <div class="popup-extra"></div>
      <button class="popup-message-btn" onclick="startChatWithUser()">Nh·∫Øn tin</button>
    </div>
  </div> 
  <script type="module" src="authFetch.js"></script>
  <script type="module" src="home.js"></script>
  <script>
    function checkScreenSize() {
      const warning = document.getElementById("unsupported-message");
      if (window.innerWidth < 400) {
        warning.classList.remove("hidden");
        document.body.style.overflow = "hidden";
      } else {
        warning.classList.add("hidden");
        document.body.style.overflow = "";
      }
    }
  
    window.addEventListener("resize", checkScreenSize);
    window.addEventListener("DOMContentLoaded", checkScreenSize);
  </script>
  
</body>
</html>
